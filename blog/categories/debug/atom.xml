<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: debug | Distributed Knowledge]]></title>
  <link href="http://distkeys.com/blog/categories/debug/atom.xml" rel="self"/>
  <link href="http://distkeys.com/"/>
  <updated>2014-06-18T23:13:50-07:00</updated>
  <id>http://distkeys.com/</id>
  <author>
    <name><![CDATA[Vaibhav Gautam]]></name>
    <email><![CDATA[gautam.usc@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[GDB - Print Bit values of bytes]]></title>
    <link href="http://distkeys.com/blog/2013/10/06/gdb-print-bit-values-of-bytes/"/>
    <updated>2013-10-06T21:06:00-07:00</updated>
    <id>http://distkeys.com/blog/2013/10/06/gdb-print-bit-values-of-bytes</id>
    <content type="html"><![CDATA[
<h2>Print bit values in a byte</h2>

<p>Recently, I have been working on interesting piece of code whose crux is to create a array of pointer addresses.
Each entry in this array is address pointing to memory location.</p>

<p>For example<br />
Container array contains char addresses. Here, 100 is memory address where char value resides.</p>
<table><td>100</td><td>1000</td><td>2000</td></table>
<p><br />
Address 100<br /></p>
<table><td>v</td><td>a</td><td>i</td><td>b</td><td>h</td><td>a</td><td>v</td><td>\0</td></table>
<p><br />
Sometimes char data type is used as a package of 8 bits not as a valid char value.<br />
<!-- more --></p>

<h3>Code snippet</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption class='code-header'><span>Print bit values </span></figcaption>
 <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span class="preprocessor">#include</span> <span class="include">&lt;stdio.h&gt;</span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span><span class="preprocessor">#include</span> <span class="include">&lt;stdlib.h&gt;</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span class="preprocessor">#include</span> <span class="include">&lt;string.h /&gt;</span>&lt;/stdlib.h&gt;&lt;/stdio.h&gt;&lt;/p&gt;
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>&lt;p&gt;<span class="predefined-type">int</span> main()
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>{
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    <span class="predefined-type">char</span> &lt;em&gt;*container = (<span class="predefined-type">char</span> **)malloc(<span class="integer">10</span> * <span class="keyword">sizeof</span>(<span class="predefined-type">char</span>&lt;/em&gt;));
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span class="predefined-type">char</span> **start = container;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    <span class="predefined-type">char</span> *node;&lt;/p&gt;
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>&lt;pre&gt;&lt;code&gt;<span class="predefined-type">char</span> name[] = <span class="string"><span class="delimiter">&quot;</span><span class="content">Vaibhav</span><span class="delimiter">&quot;</span></span>;
<span class="line-numbers"><a href="#n13" name="n13">13</a></span><span class="predefined-type">int</span> i = <span class="integer">0</span>;
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span><span class="keyword">if</span> (container == <span class="predefined-constant">NULL</span>) {
<span class="line-numbers"><a href="#n16" name="n16">16</a></span><span class="keyword">return</span> <span class="integer">0</span>;
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>}
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span><span class="keyword">for</span> (i = <span class="integer">0</span>; i &amp;lt;= <span class="integer">2</span>; i++) {
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>node = (<span class="predefined-type">char</span> *)malloc(<span class="integer">10</span> * <span class="keyword">sizeof</span>(<span class="predefined-type">char</span>));
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>memcpy(node, &amp;amp;name, strlen(name) + <span class="integer">1</span>); 
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>*container = node;
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>container++;
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>}
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>*container = <span class="predefined-constant">NULL</span>;
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>
<span class="line-numbers"><a href="#n27" name="n27">27</a></span><span class="keyword">while</span> (*start != <span class="predefined-constant">NULL</span>) {
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">%s</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>, *start);
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>start++;
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>}
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>
<span class="line-numbers"><a href="#n32" name="n32">32</a></span><span class="keyword">return</span> <span class="integer">0</span>; } </pre></div>
</div>
 </figure></notextile></div>
</code></pre>

<p><br />
Focusing on following code section</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="keyword">for</span> (i = <span class="integer">0</span>; i &lt; = <span class="integer">2</span>; i++) {
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>    node = (<span class="predefined-type">char</span> *)malloc(<span class="integer">10</span> * <span class="keyword">sizeof</span>(<span class="predefined-type">char</span>));
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>    memcpy(node, &amp;name, strlen(name) + <span class="integer">1</span>); 
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>    *container = node;
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>    container++;
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>}
</pre></div>
</div>
</div>

<p><br />In this section, a memory of 10 chars is being allocated, initialized and finally assigned to container array.
<br />Lets observer, if we have set the right information in each char bit.</p>

<p><blockquote><p>Compile code using for GDB<br/>gcc -g fileName.c</p></blockquote></p>

<p><br /></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption class='code-header'><span>GDB Trace </span></figcaption>
 <div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>(gdb) l
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span><span class="integer">16</span>      }
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span class="integer">17</span>    
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span><span class="integer">18</span>        <span class="keyword">for</span> (i = <span class="integer">0</span>; i &amp;lt; = <span class="integer">2</span>; i++) {
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span><span class="integer">19</span>            node = (<span class="predefined-type">char</span> *)malloc(<span class="integer">10</span> * <span class="keyword">sizeof</span>(<span class="predefined-type">char</span>));
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span><span class="integer">20</span>            memcpy(node, &amp;amp;name, strlen(name) + <span class="integer">1</span>);
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span><span class="integer">21</span>            *container = node;
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span><span class="integer">22</span>            container++;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span><span class="integer">23</span>        }
<span class="line-numbers"><a href="#n11" name="n11">11</a></span><span class="integer">24</span>        *container = <span class="predefined-constant">NULL</span>;
<span class="line-numbers"><a href="#n12" name="n12">12</a></span><span class="integer">25</span>    
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>(gdb) ptype node
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>type = <span class="predefined-type">char</span> *
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>(gdb) p node
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>$<span class="integer">1</span> = <span class="hex">0x1001000e0</span> <span class="error">“</span>Vaibhav<span class="error">”</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>(gdb) x/<span class="integer">8</span>bb node
<span class="line-numbers"><a href="#n18" name="n18">18</a></span><span class="hex">0x1001000e0</span>:    <span class="hex">0x56</span>    <span class="hex">0x61</span>    <span class="hex">0x69</span>    <span class="hex">0x62</span>    <span class="hex">0x68</span>    <span class="hex">0x61</span>    <span class="hex">0x76</span>    <span class="hex">0x00</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>(gdb) x/<span class="integer">8</span>ub node
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span><span class="hex">0x1001000e0</span>:    <span class="integer">86</span>    <span class="integer">97</span>    <span class="integer">105</span>    <span class="integer">98</span>    <span class="integer">104</span>    <span class="integer">97</span>    <span class="integer">118</span>    <span class="integer">0</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>(gdb) x/<span class="integer">8</span>tb node
<span class="line-numbers"><a href="#n22" name="n22">22</a></span><span class="hex">0x1001000e0</span>:    <span class="octal">01010110</span>    <span class="octal">01100001</span>    <span class="octal">01101001</span>    <span class="octal">01100010</span>    <span class="octal">01101000</span>    <span class="octal">01100001</span>    <span class="octal">01110110</span>    <span class="octal">00000000</span>
</pre></div>
</div>
 </figure></notextile></div></p>
]]></content>
  </entry>
  
</feed>
